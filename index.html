<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Picadelly</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="https://codepen.io/GreenSock/pen/7ba936b34824fefdccfe2c6d9f0b740b.css"
    />
    <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="/css/all.min.css" />
    <link rel="stylesheet" type="text/css" href="/css/animate.min.css" />
    <link rel="stylesheet" type="text/css" href="/css/owl.carousel.min.css" />
  </head>
  <body>
    <!-- Loader visible immediately -->
<div id="simple-loader" style="
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(255, 255, 255);
  display: flex; align-items: center; justify-content: center;
  z-index: 9999;
">
  <div style="
    width: 50px; height: 50px;
    border: 6px solid rgb(255, 255, 255);
    border-left-color: #f2682a;
    border-radius: 50%;
    animation: spin 1s linear infinite;
  "></div>
</div>
<div id="overlay" style="
  display: none;
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.5);
  z-index: 99;
"></div>



    <div id="root"></div>
    <link rel="stylesheet" type="text/css" href="/css/style.css" />
    <script type="module" src="/src/main.jsx"></script>
    <script
      src="https://code.jquery.com/jquery-3.7.1.slim.min.js"
      integrity="sha256-kmHvs0B+OpCW5GVHUNjv9rOmY0IvSIRcf7zGUDTDQM8="
      crossorigin="anonymous"
    ></script>

    <script src="/js/wow.min.js"></script>
    <script src="/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript" src="/js/owl.carousel.min.js"></script>
    <script src="/js/index.js"></script>
    <link rel="stylesheet" type="text/css" href="/css/style_2.css" />

    <link rel="stylesheet" type="text/css" href="css/style-1.css" />
    <script
      type="text/javascript"
      src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/16327/gsap-latest-beta.min.js?r=5426"
    ></script>
    <script
      type="text/javascript"
      src="https://assets.codepen.io/16327/ScrollTrigger.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://codepen.io/GreenSock/pen/7ba936b34824fefdccfe2c6d9f0b740b.js"
    ></script>
    <script type="text/javascript">
      window.addEventListener("load", function () {
        gsap.registerPlugin(ScrollTrigger);

        const interval = setInterval(() => {
          const sections = gsap.utils.toArray(".panel");
          console.log("Checking panels:", sections.length);

          if (sections.length > 1) {
            clearInterval(interval); // Stop checking
            const horizontalParallax = document.querySelector(
              ".horizontal_parallax"
            );

            if (horizontalParallax) {
              gsap.to(sections, {
                xPercent: -100 * (sections.length - 1),
                ease: "none",
                scrollTrigger: {
                  trigger: horizontalParallax,
                  pin: true,
                  scrub: 1,
                  snap: 1 / (sections.length - 1),
                  end: () => "+=" + horizontalParallax.offsetWidth,
                },
              });
            }
          } else {
            clearInterval(interval);
          }
        }, 1200); // Check every 200ms
      });

     window.addEventListener("load", function () {
  const box = document.querySelector("#myBox");
  if (!box) return;

  const endMargin = 300; // space after sticky stop

  // Desktop + mobile scroll
  $(window).on("scroll", function () {
    const scrollTop = $(window).scrollTop();
    const isMobile = window.matchMedia("(max-width: 768px)").matches;

    // ===== VIDEO SCROLL EFFECT =====
    if (!isMobile) {
      // Desktop video logic (unchanged)
      var x = scrollTop;
      if (x > 700) {
        x = (x - 700) * 2.5;
        let y = x + "px";
        $(".second_video").css("clip-path", `circle(${y} at center)`);
      } else {
        $(".second_video").css("clip-path", "circle(0px at center)");
      }
    } else {
      // Mobile video logic (unchanged except start=500)
      var x = scrollTop;
      if (x > 500) {
        x = (x - 500) * 0.8;
        let y = x + "px";
        $(".second_video").css("clip-path", `circle(${y} at 50vw 50vh)`);
      } else {
        $(".second_video").css("clip-path", "circle(0px at 20%)");
      }
    }

    // ===== SAFARI-PROOF STICKY BOX =====
    let startSticky = isMobile ? 500 : 700; // match your zones
    let endSticky = isMobile ? 850 : 1000;  // match your zones

    if (scrollTop >= startSticky && scrollTop <= endSticky) {
      // Stick to top
      box.style.position = "fixed";
      box.style.top = "0";
      box.style.left = "0";
      box.style.width = "100%";
      box.style.zIndex = "999";
      box.style.marginTop = "0";
    } 
    else if (scrollTop > endSticky) {
      // Unstick with extra space
      box.style.position = "relative";
      box.style.top = "auto";
      box.style.left = "auto";
      box.style.marginTop = `${endMargin}px`;
    } 
    else {
      // Reset before sticky zone
      box.style.position = "relative";
      box.style.top = "auto";
      box.style.left = "auto";
      box.style.marginTop = "0";
    }
  });
});


const timestamp = Date.now();

  // Select all link elements with rel="stylesheet"
  document.querySelectorAll('link[rel="stylesheet"]').forEach(link => {
    const href = link.getAttribute('href');
    // Only add ?v= if not already present
    if (href && !href.includes('?v=')) {
      link.setAttribute('href', href + '?v=' + timestamp);
    }
  });
     
    </script>
    <script>
  window.addEventListener('load', function () {
    var loader = document.getElementById('simple-loader');
    if (loader) {
      loader.style.display = 'none';
    }
  });
</script>
  </body>
</html>
